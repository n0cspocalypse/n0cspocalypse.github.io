/* ============================================
   CRT SCANLINE OVERLAY
   ============================================ */
.crt-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 9999;
  background: repeating-linear-gradient(
    0deg,
    rgba(0, 0, 0, 0.03) 0px,
    rgba(0, 0, 0, 0.03) 1px,
    transparent 1px,
    transparent 3px
  );
  mix-blend-mode: multiply;
}

/* ============================================
   MATRIX RAIN CANVAS
   ============================================ */
#matrix-rain {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  height: 100dvh;
  z-index: 0;
  pointer-events: none;
  opacity: 0.22;
}

/* ============================================
   CURSOR BLINK
   ============================================ */
.terminal-input {
  caret-color: var(--green);
}

/* ============================================
   TEXT GLOW
   ============================================ */
.glow-text {
  text-shadow: var(--glow-green);
}

.glow-cyan {
  text-shadow: var(--glow-cyan);
}

/* ============================================
   IDLE FLICKER
   ============================================ */
.flicker {
  animation: idle-flicker 0.15s ease-in-out;
}

@keyframes idle-flicker {
  0%   { opacity: 1; }
  25%  { opacity: 0.85; }
  50%  { opacity: 0.95; }
  75%  { opacity: 0.88; }
  100% { opacity: 1; }
}

/* ============================================
   GLITCH EFFECT
   ============================================ */
.glitch {
  animation: glitch-anim 0.3s ease-in-out;
}

@keyframes glitch-anim {
  0%   { transform: translate(0); filter: none; }
  10%  { transform: translate(-2px, 1px); filter: hue-rotate(90deg); }
  20%  { transform: translate(2px, -1px); filter: hue-rotate(-90deg); }
  30%  { transform: translate(-1px, 2px); clip-path: inset(20% 0 40% 0); }
  40%  { transform: translate(1px, -2px); clip-path: inset(60% 0 10% 0); }
  50%  { transform: translate(-2px, 0); filter: saturate(2); }
  60%  { transform: translate(2px, 1px); clip-path: inset(30% 0 30% 0); }
  70%  { transform: translate(0, -1px); filter: brightness(1.5); }
  80%  { transform: translate(-1px, 0); clip-path: none; }
  90%  { transform: translate(1px, 1px); filter: none; }
  100% { transform: translate(0); filter: none; clip-path: none; }
}

/* ============================================
   EERIE BANNER GLOW
   ============================================ */
.terminal-output .line.eerie-glow {
  color: var(--green);
  font-size: var(--font-size-sm);
  line-height: 1.2;
  animation: eerie-pulse 20s ease-in-out infinite;
}

.terminal-output .line.mobile-banner {
  font-family: 'Arial Black', 'Helvetica Neue', Arial, sans-serif;
  font-size: 52px;
  font-weight: 900;
  letter-spacing: 8px;
  text-align: center;
  line-height: 1.3;
  padding: 0.5em 0;
  white-space: nowrap;
}

@media (max-width: 768px) {
  .terminal-output .line.mobile-banner {
    font-size: 32px;
    letter-spacing: 4px;
    white-space: normal;
  }
}

@media (max-width: 480px) {
  .terminal-output .line.mobile-banner {
    font-size: 24px;
    letter-spacing: 3px;
  }
}

@keyframes eerie-pulse {
  0%, 100% {
    color: #00ff41;
    text-shadow:
      0 0 4px rgba(0, 255, 65, 0.5),
      0 0 12px rgba(0, 255, 65, 0.3),
      0 0 30px rgba(0, 255, 65, 0.15);
    opacity: 0.9;
  }
  14% {
    color: #00ff41;
    text-shadow:
      0 0 8px rgba(0, 255, 65, 0.8),
      0 0 25px rgba(0, 255, 65, 0.5),
      0 0 50px rgba(0, 255, 65, 0.2);
    opacity: 1;
  }
  28% {
    color: #00d4ff;
    text-shadow:
      0 0 8px rgba(0, 212, 255, 0.8),
      0 0 25px rgba(0, 212, 255, 0.5),
      0 0 60px rgba(0, 212, 255, 0.2);
    opacity: 1;
  }
  42% {
    color: #bf00ff;
    text-shadow:
      0 0 8px rgba(191, 0, 255, 0.8),
      0 0 25px rgba(191, 0, 255, 0.5),
      0 0 60px rgba(191, 0, 255, 0.2);
    opacity: 0.95;
  }
  56% {
    color: #ff0040;
    text-shadow:
      0 0 8px rgba(255, 0, 64, 0.8),
      0 0 25px rgba(255, 0, 64, 0.5),
      0 0 60px rgba(255, 0, 64, 0.2);
    opacity: 1;
  }
  70% {
    color: #ffb000;
    text-shadow:
      0 0 8px rgba(255, 176, 0, 0.8),
      0 0 25px rgba(255, 176, 0, 0.5),
      0 0 60px rgba(255, 176, 0, 0.2);
    opacity: 0.95;
  }
  85% {
    color: #00d4ff;
    text-shadow:
      0 0 6px rgba(0, 212, 255, 0.6),
      0 0 20px rgba(0, 212, 255, 0.35),
      0 0 45px rgba(0, 212, 255, 0.15);
    opacity: 0.92;
  }
}

/* ============================================
   BOOT SEQUENCE FADE-IN
   ============================================ */
.boot-line {
  opacity: 0;
  animation: boot-appear 0.1s forwards;
}

@keyframes boot-appear {
  to { opacity: 1; }
}

/* ============================================
   TYPING CURSOR FOR OUTPUT
   ============================================ */
.typing-cursor::after {
  content: '\2588';
  color: var(--green);
  animation: blink-block 0.7s step-end infinite;
}

@keyframes blink-block {
  0%, 100% { opacity: 1; }
  50%      { opacity: 0; }
}

/* ============================================
   NEON PULSE (for GUI skill bars)
   ============================================ */
@keyframes neon-pulse {
  0%, 100% { box-shadow: 0 0 4px rgba(0, 255, 65, 0.3); }
  50%      { box-shadow: 0 0 12px rgba(0, 255, 65, 0.6); }
}

.skill-bar-fill {
  animation: neon-pulse 2s ease-in-out infinite;
}

/* ============================================
   GUI SECTION ENTRANCE
   ============================================ */
.gui-section {
  opacity: 0;
  transform: translateY(20px);
  animation: section-enter 0.4s ease forwards;
}

.gui-section:nth-child(1) { animation-delay: 0.1s; }
.gui-section:nth-child(2) { animation-delay: 0.2s; }
.gui-section:nth-child(3) { animation-delay: 0.3s; }
.gui-section:nth-child(4) { animation-delay: 0.4s; }
.gui-section:nth-child(5) { animation-delay: 0.5s; }

@keyframes section-enter {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ============================================
   TRAFFIC LIGHT EASTER EGGS
   ============================================ */
.fx-blackout {
  animation: blackout 0.3s ease-in-out;
}

@keyframes blackout {
  0%   { opacity: 1; filter: none; }
  20%  { opacity: 0; filter: none; }
  50%  { opacity: 0; filter: none; }
  55%  { opacity: 1; filter: brightness(3) saturate(0); }
  60%  { opacity: 0.1; filter: none; }
  70%  { opacity: 0.9; filter: brightness(2); }
  100% { opacity: 1; filter: none; }
}

.fx-shrink {
  animation: shrink-bounce 0.3s ease-in-out;
}

@keyframes shrink-bounce {
  0%   { transform: scale(1); }
  40%  { transform: scale(0.85); }
  70%  { transform: scale(1.02); }
  100% { transform: scale(1); }
}

.fx-zoom {
  animation: zoom-pulse 0.3s ease-in-out;
}

@keyframes zoom-pulse {
  0%   { transform: scale(1); box-shadow: none; }
  50%  { transform: scale(1.08); box-shadow: 0 0 30px rgba(0, 255, 65, 0.6), 0 0 60px rgba(0, 255, 65, 0.3); }
  100% { transform: scale(1); box-shadow: none; }
}

/* ============================================
   WHITE RABBIT EASTER EGG
   ============================================ */
.white-rabbit {
  position: fixed;
  bottom: 10px;
  width: 64px;
  height: 64px;
  background: url('../assets/bunny-run.png') 0 0 / 800% 100%;
  image-rendering: pixelated;
  pointer-events: none;
  z-index: 9998;
  opacity: 0.35;
  animation:
    bunny-run 0.6s steps(8) infinite,
    bunny-cross 6s linear forwards,
    bunny-glitch 2.5s steps(1) infinite;
}

@keyframes bunny-run {
  to { background-position: -512px 0; }
}

@keyframes bunny-cross {
  0%   { transform: translateX(-80px); }
  15%  { transform: translateX(8vw); }
  20%  { transform: translateX(18vw); }
  35%  { transform: translateX(28vw); }
  38%  { transform: translateX(40vw); }
  55%  { transform: translateX(48vw); }
  58%  { transform: translateX(56vw); }
  60%  { transform: translateX(65vw); }
  78%  { transform: translateX(72vw); }
  82%  { transform: translateX(85vw); }
  100% { transform: translateX(100vw); }
}

@keyframes bunny-glitch {
  0%   { opacity: 0.35; filter: none; }
  12%  { opacity: 0.35; filter: none; }
  13%  { opacity: 0; filter: none; }
  22%  { opacity: 0; filter: none; }
  23%  { opacity: 0.5; filter: brightness(2) hue-rotate(40deg); }
  26%  { opacity: 0.35; filter: none; }
  50%  { opacity: 0.35; filter: none; }
  51%  { opacity: 0; filter: none; }
  62%  { opacity: 0; filter: none; }
  63%  { opacity: 0.45; filter: brightness(1.8); }
  66%  { opacity: 0.35; filter: none; }
  82%  { opacity: 0.35; filter: none; }
  83%  { opacity: 0; filter: none; }
  88%  { opacity: 0; filter: none; }
  89%  { opacity: 0.55; filter: brightness(2) saturate(2); }
  92%  { opacity: 0.35; filter: none; }
  100% { opacity: 0.35; filter: none; }
}

/* ============================================
   REDUCED MOTION
   ============================================ */
@media (prefers-reduced-motion: reduce) {
  .crt-overlay {
    display: none;
  }

  #matrix-rain {
    display: none;
  }

  .terminal-input {
    animation: none;
    border-right: 2px solid var(--green);
  }

  .skill-bar-fill {
    animation: none;
  }

  .gui-section {
    animation: none;
    opacity: 1;
    transform: none;
  }

  .terminal-output .line {
    animation: none;
    opacity: 1;
  }

  .white-rabbit {
    display: none;
  }
}
